🛠️ Runbook — Solana Bots

This runbook describes how to operate and test the three bots:

Bot #1 (Execution) → Executes trades in real time based on signals and wallet types.

Bot #2 (Analytics) → Runs daily to analyze wallet behavior and export config (wallets.json).

Bot #3 (Price Fetcher) → Fetches Solana price daily (supporting Bot #2).

⚡ Bot #1 — Execution Bot
Purpose

Live trading bot.

Reads wallets.json generated by Bot #2.

Executes buys/sells in real time:

Trader wallets → Copy trades, exit early using avg hold time / TP multiple.

Creator wallets → Only trigger on CreateMint events.

Key Functions

Reads config JSON (/config/wallets.json).

Subscribes to wallet events via WebSocket (not polling).

Prebuilds & pre-signs transactions for speed.

Applies wallet-specific rules: TP, hold seconds, min buy size, slippage, fees.

Sends tx with priority fee / Jito bundles.

Ensures 1 transaction at a time (queue/lock).

Tracks open positions and exits with correct fee accounting.

Logs detection→send latency, confirmations, and P&L.

Circuit breakers: max daily loss, max trades/hour, max hold time.

📊 Bot #2 — Analytics Bot
Purpose

Offline analytics.

Runs once per day (or on demand).

Produces trading rules for each wallet based on history.

Key Functions

Inputs: list of tracked wallets.

Fetches transaction history (via Helius RPC or cached DB).

Parses swaps (Jupiter, Raydium, Orca) and token creation (CreateMint).

Matches buys→sells with FIFO logic.

Computes per-wallet stats:

avg/median hold time.

avg/median TP multiple.

win rate.

total realized P&L.

Exports /config/wallets.json for Bot #1:

type: trader → includes TP, hold time, min buy size.

type: creator → only signals on token creation.

Archives daily reports in /data/reports/.

💵 Bot #3 — Solana Price Bot
Purpose

Fetches current Solana price daily.

Used by Bot #2 for USD conversions in P&L stats.

Status

✅ Working (tested).

🧪 Testing Checklist
Static Checks

 Lint + type-check (tsc).

 Validate JSON schemas (wallets.json, reports).

Bot #1 — Execution

 Subscriptions trigger correctly (no polling).

 Trader wallet: detect buy → bot buys → exits by TP/hold rules.

 Creator wallet: only triggers on CreateMint.

 One tx at a time enforced.

 Fee accounting correct.

 Retries + stale blockhash refresh work.

 Circuit breakers tested.

Bot #2 — Analytics

 Fetch + parse history for each wallet.

 FIFO lot matching correct (partial sells handled).

 Correct USD conversion at tx time.

 Stats output matches manual checks.

 wallets.json exports correct schema.

Bot #3 — Solana Price

 Returns valid USD price.

 Integrated with Bot #2.

End-to-End

 Bot #2 runs → generates wallets.json.

 Bot #1 consumes wallets.json → trades with correct rules.

 Reports archived for audit.

 Shadow-mode test (dry-run) on mainnet: logs trades without sending.

 Canary test (tiny real trades) → confirm performance + P&L.